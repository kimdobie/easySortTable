//jquery.easySortTable.js - version 1.1.1

var sortTableVars={noSortClass:"noSort",sortHeaderClass:"sortHeader",sortLinkTextClass:"sortLinkText",headerLinkTitle:"Sort this column",alreadySortedAscendingClass:"sortedAscending",alreadySortedDescendingClass:"sortedDescending",sortArrowClass:"sortArrow",ascSortArrow:"&nbsp;&darr;",descSortArrow:"&nbsp;&uarr;",sortDirectionAscClass:"sortDirectionAsc",sortDirectionDesClass:"sortDirectionDes",sortKeyClassStart:"dataType_",sortFunctionClassStart:"sort_",sortKeyClass:"sortKey",sortedColumnClass:"sortedCol",
sortHeaderRowClass:"sortHeaderRow",secondarySortClass:"secondarySort_"};jQuery.fn.alternateRowColors=function(){jQuery("tbody tr:visible:odd",this).removeClass("odd").addClass("even");jQuery("tbody tr:visible:even",this).removeClass("even").addClass("odd");return this};
jQuery.fn.easySortTable=function(){return this.each(function(){var a;a=jQuery(this).find("tr."+sortTableVars.sortHeaderRowClass).length>0?jQuery(this).find("tr."+sortTableVars.sortHeaderRowClass).eq(0):jQuery(this).find("thead").length>0?jQuery(this).find("thead tr:last"):jQuery(this).find("tr:first");jQuery(a).parents("thead").length==0&&(jQuery(this).prepend("<thead></thead>"),jQuery(this).find("thead:first").append(a));jQuery(a).children().each(function(a){jQuery(this).setSortLink(a)});jQuery(this).alternateRowColors()})};
jQuery.fn.setSortLink=function(a,b){if(!jQuery(this).hasClass(sortTableVars.noSortClass)){if(a==void 0||a==""){var c=jQuery(this).parents("tr").eq(0),e;jQuery(this).each(function(){e=this});jQuery(c).find("th").each(function(b){this==e&&(a=b)});(a==void 0||a=="")&&jQuery(c).find("td").each(function(b){this==e&&(a=b)})}var c=this,f=!0,b="";jQuery(c).find("."+sortTableVars.sortHeaderClass).length>0&&(c=jQuery(c).find("."+sortTableVars.sortHeaderClass).eq(0),jQuery(c).removeClass(sortTableVars.sortHeaderClass),
f=!1);jQuery(c).wrapInner('<a href="javascript:void(0)"><span class="'+sortTableVars.sortLinkTextClass+'"></span></a>');var g=jQuery(c).find("a:first");g.attr("title",sortTableVars.headerLinkTitle).addClass(sortTableVars.sortHeaderClass);jQuery(c).hasClass(sortTableVars.alreadySortedAscendingClass)&&(b=1);jQuery(c).hasClass(sortTableVars.alreadySortedDescendingClass)&&(b=-1);g.setSortArrow(b,!1);f&&g.css("display","block");g.click(function(){jQuery(this).sortTableColumn(a)})}return this};
jQuery.fn.setSecondarySort=function(){jQuery(this).removeSecondarySort();for(var a=jQuery(this).sortGetParentCell(),b=sortTableVars.secondarySortClass,c=0;c<arguments.length;c++)if(typeof arguments[c]=="object"){c!=0&&(b+="_");var e=jQuery(arguments[c]).sortGetTableCellIndex();b+=e+"_";b+=arguments[c+1]!="object"&&arguments[c+1]!=void 0?arguments[c+1]:"0"}jQuery(a).addClass(b)};
jQuery.fn.setSecondarySortByIndex=function(){if(arguments.length%2!=0)return alert("Odd number of arguments sent to the setSecondarySortByIndex method"),this;for(var a=jQuery(this).sortGetParentCell(),b=sortTableVars.secondarySortClass,c=0;c<arguments.length;c++)c!=0&&(b+="_"),b+=arguments[c];jQuery(a).addClass(b)};
jQuery.fn.removeSecondarySort=function(){var a=jQuery(this).sortCheckForClass(sortTableVars.secondarySortClass);if(a!="")return jQuery(this).removeClass(a),this;a=jQuery(this).parent("th");if(a.length!=0){var b=jQuery(a).eq(0).sortCheckForClass(sortTableVars.secondarySortClass);if(b!="")return jQuery(a).eq(0).removeClass(b),this}a=jQuery(this).parent("td");a.length!=0&&(b=jQuery(a).eq(0).sortCheckForClass(sortTableVars.secondarySortClass),b!=""&&jQuery(a).eq(0).removeClass(b));return this};
jQuery.fn.setSortArrow=function(a,b){b!=!1&&(b=!0);jQuery(this).find("."+sortTableVars.sortArrowClass).length==0&&jQuery(this).append("<span class='"+sortTableVars.sortArrowClass+"'></span>");b&&jQuery(this).parents("table").eq(0).find("."+sortTableVars.sortArrowClass).empty();jQuery(this).removeClass(sortTableVars.sortDirectionAscClass).removeClass(sortTableVars.sortDirectionDesClass).find("."+sortTableVars.sortArrowClass).eq(0).empty();a==1?jQuery(this).addClass(sortTableVars.sortDirectionAscClass).find("."+
sortTableVars.sortArrowClass).eq(0).html(sortTableVars.ascSortArrow):a==-1&&jQuery(this).addClass(sortTableVars.sortDirectionDesClass).find("."+sortTableVars.sortArrowClass).eq(0).html(sortTableVars.descSortArrow);return this};
jQuery.fn.sortTableColumn=function(a,b,c,e){dataType_alpha=function(a){if(jQuery.browser.msie){var b=a.html().replace(/&nbsp;+/g," ");a.html(b)}return jQuery.trim(a.find("."+sortTableVars.sortKeyClass).text().toUpperCase())+" "+jQuery.trim(a.text().toUpperCase())};dataType_numeric=function(a){var b=a.text();a.find("."+sortTableVars.sortKeyClass).length>0&&(b=a.find("."+sortTableVars.sortKeyClass).eq(0));a=parseFloat(b.replace(/^[^\d.]*/,""));return isNaN(a)?0:a};dataType_date=function(a){if(jQuery.browser.msie){var b=
a.html().replace(/&nbsp;+/g," ");a.html(b)}b=jQuery.trim(a.text());a.find("."+sortTableVars.sortKeyClass).length>0&&(b=jQuery.trim(a.find("."+sortTableVars.sortKeyClass).eq(0)));return b.substr(6,4)+b.substr(0,2)+b.substr(3,2)};sort_default=function(a,b){for(var c=0;c<a.sortKey.length;c++){if(a.sortKey[c]>b.sortKey[c])return a.sortDirection[c];if(a.sortKey[c]<b.sortKey[c])return-a.sortDirection[c]}return 0};checkSecondarySort=function(a){a=jQuery(a).sortCheckForClass(sortTableVars.secondarySortClass);
if(a=="")return"";a=a.split("_");a.shift();if(a.length%2!=0)return alert("incorrect number of items set in the secondarySort class"),"";for(var b=[],c=0;c<a.length;c+=2)b.push([a[c],a[c+1]]);return b};var f=!1,g;typeof a!="object"?(g=[[a,b,c]],f=!0):(g=a,e=b);var d,h,o,l=g[0][0],c=g[0][1];d=jQuery(this).getTagName();if(d=="table"||d=="TABLE"){h=this;if(l==void 0)return alert("No column index was passed to the sortTableColumn function - sorting did not happen."),this;headerRow=jQuery(h).find("tr."+
sortTableVars.sortHeaderRowClass).length>0?jQuery(h).find("tr."+sortTableVars.sortHeaderRowClass).eq(0):jQuery(h).find("thead").length>0?jQuery(h).find("thead tr:last"):jQuery(h).find("tr:first");d=jQuery(headerRow).children().eq(l);o=jQuery(d).find("."+sortTableVars.sortHeaderClass).eq(0)}else if(d=="td"||d=="TD"||d=="th"||d=="TH")d=this,headerRow=jQuery(d).parents("tr").eq(0),h=jQuery(this).parents("table").eq(0),o=jQuery(this).find("."+sortTableVars.sortHeaderClass).eq(0);else if((d=="a"||d=="A")&&
jQuery(this).hasClass(sortTableVars.sortHeaderClass))d=jQuery(this).parents("th").length>0?jQuery(this).parents("th").eq(0):jQuery(this).parents("td").eq(0),headerRow=jQuery(d).parents("tr").eq(0),h=jQuery(this).parents("table").eq(0),o=this;else return alert("Improper object daisy-chained to the sortTableColumn function - sorting did not happen."),this;if(f&&(f=checkSecondarySort(d),f!=""&&f.length>0))for(var i=0;i<f.length;i++)g.push(f[i]);if(l==void 0||l==""){var f=jQuery(d).parents("tr").eq(0),
p;jQuery(d).each(function(){p=this});jQuery(f).find("th").each(function(a){this==p&&(g[0][0]=a)});(a==void 0||a=="")&&jQuery(f).find("td").each(function(a){this==p&&(g[0][0]=a)});l=g[0][0]}for(var f=jQuery(h).find("tbody > tr").get(),k=0;k<g.length;k++){var a=g[k][0],b=g[k][1],j=g[k][2];b==0&&(b=c);if(b==void 0||b==""||b!=1&&b!=-1)b=jQuery(headerRow).children().eq(a).find("."+sortTableVars.sortHeaderClass).eq(0).hasClass(sortTableVars.sortDirectionAscClass)?-1:1,k==0&&(c=b);if(j==void 0||j=="")j=
"",(i=jQuery(headerRow).children().eq(a).sortCheckForClass(sortTableVars.sortKeyClassStart))&&(j=eval(i));if(j==""){j=dataType_alpha;jQuery(headerRow).children().eq(a).addClass("dataType_alpha");for(var m="",i=0;m=="";i++){var n=jQuery(h).find("tbody tr").eq(i).find("td").eq(a);if(jQuery.browser.msie){var q=jQuery(n).html().replace(/&nbsp;+/g," ");jQuery(n).html(q)}n=jQuery.trim(jQuery(h).find("tbody tr").eq(i).find("td").eq(a).text());n!=""&&(m=n)}m.match(/^\d\d[\/-]\d\d[\/-]\d\d\d\d$/)&&(j=dataType_date,
jQuery(headerRow).children().eq(a).removeClass("dataType_alpha").addClass("dataType_date"));m.match(/^\d\d[\/-]\d\d[\/-]\d\d$/)&&(j=dataType_date,jQuery(headerRow).children().eq(a).removeClass("dataType_alpha").addClass("dataType_date"));m.match(/^[\u00a3$]/)&&(j=dataType_numeric,jQuery(headerRow).children().eq(a).removeClass("dataType_alpha").addClass("dataType_numeric"));m.match(/^[\d\.]+$/)&&(j=dataType_numeric,jQuery(headerRow).children().eq(a).removeClass("dataType_alpha").addClass("dataType_numeric"))}jQuery.each(f,
function(c,d){if(k==0)d.sortKey=[],d.sortDirection=[];d.sortKey[k]=j(jQuery(d).children("td").eq(a));d.sortDirection[k]=b})}if(e==void 0||e=="")e="",i=jQuery(d).sortCheckForClass(sortTableVars.sortFunctionClassStart),i!=""&&(sortKey=eval(i));e==""&&(e=sort_default,jQuery(d).addClass("sort_default"));f.sort(e);jQuery.each(f,function(a,b){jQuery(h).children("tbody").append(b);jQuery(b).find("."+sortTableVars.sortedColumnClass).removeClass(sortTableVars.sortedColumnClass);jQuery(b).find("td").eq(l).addClass(sortTableVars.sortedColumnClass);
b.sortKey=null;b.sortDirection=null});jQuery(d).parents("tr").eq(0).find("."+sortTableVars.sortedColumnClass).removeClass(sortTableVars.sortedColumnClass);jQuery(d).addClass(sortTableVars.sortedColumnClass);jQuery(h).alternateRowColors();jQuery(o).setSortArrow(c);typeof sortTableCallBack!="undefined"&&sortTableCallBack({index:a,direction:b});return this};
jQuery.fn.sortCheckForClass=function(a){var b=[],a=RegExp(a);if(jQuery(this).attr("class")==void 0)return"";for(var b=jQuery(this).attr("class").split(" "),c=0;c<b.length;c++)if(b[c].match(a))return b[c];return""};jQuery.fn.getTagName=function(){var a="";jQuery(this).each(function(){a=this.tagName});return a};
jQuery.fn.sortGetParentCell=function(){var a=jQuery(this).getTagName();if(a=="th"||a=="TH"||a=="td"||a=="TD")return this;a=jQuery(this).parent("th");if(a.length>0)return a.eq(0);a=jQuery(this).parent("td");if(a.length>0)return a.eq(0);return this};
jQuery.fn.sortGetTableCellIndex=function(){var a=jQuery(this).sortGetParentCell(),b=jQuery(a).parents("tr").eq(0),c,e="";jQuery(a).each(function(){c=this});jQuery(b).find("th").each(function(a){this==c&&(e=a,alert("th "+a))});(e==void 0||e=="")&&jQuery(b).find("td").each(function(a){this==c&&(e=a)});return e};